<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OldSchool Board</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #f8bbd9;
            --primary-dark: #f48fb1;
            --primary-light: #fce4ec;
            --secondary-color: #e1f5fe;
            --danger-color: #ffcdd2;
            --danger-dark: #f44336;
            --success-color: #c8e6c9;
            --success-dark: #4caf50;
            --text-color: #333;
            --text-light: #666;
            --background: #fff5f7;
            --white: #ffffff;
            --shadow: 0 4px 15px rgba(0,0,0,0.1);
            --border-radius: 10px;
        }

        body {
            background-color: var(--background);
            color: var(--text-color);
            line-height: 1.6;
        }

        /* –≠–∫—Ä–∞–Ω—ã */
        .screen {
            display: none;
            min-height: 100vh;
        }

        .screen.active {
            display: block;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .welcome-container, .login-container, .rules-container {
            max-width: 600px;
            margin: 50px auto;
            padding: 40px;
            background: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            text-align: center;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: var(--primary-color);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--secondary-color);
            color: var(--text-color);
        }

        .btn-secondary:hover {
            background: #b3e5fc;
        }

        .btn-danger {
            background: var(--danger-dark);
            color: var(--white);
        }

        .btn-danger:hover {
            background: #d32f2f;
        }

        .btn-success {
            background: var(--success-dark);
            color: var(--white);
        }

        .btn-success:hover {
            background: #388e3c;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        /* –§–æ—Ä–º—ã */
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--primary-dark);
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--primary-light);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: border-color 0.3s;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            margin: 10px 0;
        }

        /* –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ */
        .main-header {
            background: var(--primary-color);
            padding: 15px 0;
            box-shadow: var(--shadow);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* –ü–æ—Å—Ç—ã */
        .posts-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 20px 0;
        }

        .post {
            background: var(--white);
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .post:hover {
            transform: translateY(-2px);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-light);
        }

        .post-author {
            font-weight: bold;
            color: var(--primary-dark);
        }

        .post-date {
            color: var(--text-light);
            font-size: 14px;
        }

        .post-content {
            margin-bottom: 20px;
            line-height: 1.6;
            white-space: pre-line;
        }

        .post-tags {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .tag {
            padding: 4px 8px;
            background: var(--primary-light);
            border-radius: 15px;
            font-size: 12px;
            color: var(--primary-dark);
            cursor: pointer;
        }

        .tag:hover {
            background: var(--primary-color);
            color: var(--white);
        }

        /* –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å */
        .admin-panel {
            background: var(--secondary-color);
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            display: none;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .admin-section {
            background: var(--white);
            padding: 15px;
            border-radius: var(--border-radius);
        }

        .admin-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .stats {
            margin: 10px 0;
        }

        .stats p {
            margin: 8px 0;
            font-weight: bold;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: var(--white);
            padding: 30px;
            border-radius: var(--border-radius);
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 20px;
        }

        /* NSFW –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ */
        .nsfw-warning {
            background: var(--danger-color);
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 15px 0;
            border-left: 5px solid var(--danger-dark);
        }

        .nsfw-content {
            display: none;
            margin-top: 15px;
        }

        /* –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ */
        .comments-section {
            margin-top: 20px;
            border-top: 2px solid var(--primary-light);
            padding-top: 15px;
        }

        .comment {
            background: var(--primary-light);
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 10px 0;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .comment-author {
            font-weight: bold;
            color: var(--primary-dark);
        }

        .comment-form {
            margin-top: 15px;
        }

        /* –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã */
        .search-container {
            background: var(--white);
            padding: 20px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            box-shadow: var(--shadow);
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-box input {
            flex: 1;
        }

        .filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            color: var(--white);
            z-index: 1001;
            box-shadow: var(--shadow);
            animation: slideIn 0.3s ease-out;
        }

        .notification.success {
            background: var(--success-dark);
        }

        .notification.error {
            background: var(--danger-dark);
        }

        .notification.warning {
            background: #ff9800;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .welcome-container, .login-container, .rules-container {
                margin: 20px auto;
                padding: 20px;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .admin-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-buttons {
                flex-direction: column;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .user-info {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ */
        .file-upload {
            margin: 15px 0;
        }

        .file-label {
            display: inline-block;
            padding: 10px 15px;
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background 0.3s;
        }

        .file-label:hover {
            background: #b3e5fc;
        }

        .image-preview {
            margin-top: 10px;
            max-width: 300px;
        }

        .image-preview img {
            max-width: 100%;
            border-radius: var(--border-radius);
            border: 2px solid var(--primary-light);
        }

        /* –ü—Ä–∞–≤–∏–ª–∞ */
        .rules-section {
            margin: 25px 0;
            padding: 20px;
            background: var(--primary-light);
            border-radius: var(--border-radius);
            text-align: left;
        }

        .rules-section h3 {
            color: var(--primary-dark);
            margin-bottom: 10px;
        }

        .rules-section ul {
            list-style: none;
            padding-left: 20px;
        }

        .rules-section li {
            margin: 8px 0;
            padding-left: 10px;
        }

        /* –°—Å—ã–ª–∫–∏ */
        .link {
            color: var(--primary-dark);
            cursor: pointer;
            text-decoration: underline;
            font-weight: bold;
            transition: color 0.3s;
        }

        .link:hover {
            color: var(--primary-color);
        }

        /* –£—Ç–∏–ª–∏—Ç—ã */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .blurred {
            filter: blur(10px);
            transition: filter 0.3s;
        }

        .blurred:hover {
            filter: blur(5px);
        }
    </style>
</head>
<body>
    <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <div id="welcomeScreen" class="screen active">
        <div class="welcome-container">
            <h1>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –Ω–∞ OldSchool Board</h1>
            <p>–ê–Ω–æ–Ω–∏–º–Ω–∞—è –∏–º–∏–¥–∂–±–æ—Ä–¥–∞ –≤ –¥—É—Ö–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–æ—Ä—á–∞–Ω–æ–≤</p>
            
            <div class="form-group mt-20">
                <label class="checkbox-label">
                    <input type="checkbox" id="ageConfirm"> –ú–Ω–µ –µ—Å—Ç—å 18 –ª–µ—Ç –∏ —è —Å–æ–≥–ª–∞—Å–µ–Ω —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏
                </label>
            </div>
            
            <div class="button-group mt-20">
                <button class="btn btn-primary" onclick="showLogin()">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Email</button>
                <button class="btn btn-secondary" onclick="enterAsGuest()">–í–æ–π—Ç–∏ –∫–∞–∫ –≥–æ—Å—Ç—å</button>
            </div>

            <p class="mt-20">
                <span class="link" onclick="showRules()">üìú –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞</span>
            </p>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª -->
    <div id="rulesScreen" class="screen">
        <div class="rules-container">
            <h2>üìú –ü—Ä–∞–≤–∏–ª–∞ OldSchool Board</h2>
            
            <div class="rules-section">
                <h3>üö´ –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–∞–ø—Ä–µ—Ç—ã (–ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–æ–º—É –±–∞–Ω—É):</h3>
                <ul>
                    <li>‚ùå –î–µ—Ç—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç (CSAM) - –Ω—É–ª–µ–≤–∞—è —Ç–µ—Ä–ø–∏–º–æ—Å—Ç—å</li>
                    <li>‚ùå –ü—Ä—è–º—ã–µ —É–≥—Ä–æ–∑—ã –∂–∏–∑–Ω–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ª–∏—Ü</li>
                    <li>‚ùå –†–∞—Å–∫—Ä—ã—Ç–∏–µ –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–¥–æ–∫—Å–∏–Ω–≥)</li>
                    <li>‚ùå –ú–∞—Ç–µ—Ä–∏–∞–ª—ã —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞</li>
                    <li>‚ùå –ü—Ä–∏–∑—ã–≤—ã –∫ —Å—É–∏—Ü–∏–¥—É –∏ –Ω–∞—Å–∏–ª–∏—é</li>
                </ul>
            </div>

            <div class="rules-section">
                <h3>‚ö†Ô∏è –ö–æ–Ω—Ç–µ–Ω—Ç —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ (—Ç—Ä–µ–±—É–µ—Ç –º–∞—Ä–∫–∏—Ä–æ–≤–∫–∏):</h3>
                <ul>
                    <li>üîû NSFW/NSFL –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Ç–µ–≥–æ–º</li>
                    <li>üíä –û–±—Å—É–∂–¥–µ–Ω–∏–µ –Ω–∞—Ä–∫–æ—Ç–∏–∫–æ–≤ —Ç–æ–ª—å–∫–æ –≤ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–º –∫–ª—é—á–µ</li>
                    <li>‚ö° –®–æ–∫-–∫–æ–Ω—Ç–µ–Ω—Ç —Ç—Ä–µ–±—É–µ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</li>
                    <li>üîá –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è –∏ —Ç—Ä–∞–≤–ª—è –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –º—É—Ç—É</li>
                </ul>
            </div>

            <div class="rules-section">
                <h3>üìã –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞:</h3>
                <ul>
                    <li>üìä –ú–∞–∫—Å–∏–º—É–º 30 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</li>
                    <li>‚è∞ –ü–æ—Å—Ç—ã —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 10 –¥–Ω–µ–π –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li>
                    <li>üìß –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ø–æ—á—Ç–µ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞</li>
                    <li>üîí –ì–æ—Å—Ç–∏ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç</li>
                    <li>üéØ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–≥–∏ –¥–ª—è categorization –∫–æ–Ω—Ç–µ–Ω—Ç–∞</li>
                </ul>
            </div>

            <button class="btn btn-primary mt-20" onclick="showWelcome()">–í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥</button>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
    <div id="loginScreen" class="screen">
        <div class="login-container">
            <h2>üîê –í—Ö–æ–¥ –≤ OldSchool Board</h2>
            <p>–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ email</p>
            
            <div class="form-group">
                <label for="loginEmail">Email –∞–¥—Ä–µ—Å:</label>
                <input type="email" id="loginEmail" placeholder="your@email.com" required>
            </div>

            <div id="codeSection" class="hidden">
                <div class="form-group">
                    <label for="verificationCode">–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:</label>
                    <input type="text" id="verificationCode" placeholder="–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥" maxlength="6">
                </div>
                <p style="font-size: 14px; color: var(--text-light); margin-bottom: 15px;">
                    –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –≤–∞—à—É –ø–æ—á—Ç—É. –ù–µ –ø—Ä–∏—à–µ–ª? 
                    <span class="link" onclick="sendVerificationCode()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –µ—â–µ —Ä–∞–∑</span>
                </p>
            </div>

            <button class="btn btn-primary" onclick="sendVerificationCode()" id="sendCodeBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</button>
            <button class="btn btn-success hidden" onclick="verifyCode()" id="verifyCodeBtn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∫–æ–¥</button>
            
            <div class="mt-20">
                <button class="btn btn-secondary" onclick="showWelcome()">–ù–∞–∑–∞–¥</button>
                <button class="btn btn-secondary" onclick="enterAsGuest()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∫–∞–∫ –≥–æ—Å—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div id="mainScreen" class="screen">
        <header class="main-header">
            <div class="header-content">
                <h1>OldSchool Board</h1>
                <div class="user-info">
                    <span id="userStatus">–ì–æ—Å—Ç—å</span>
                    <button class="btn btn-small btn-secondary" onclick="logout()">–í—ã–π—Ç–∏</button>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å -->
            <div id="adminPanel" class="admin-panel">
                <h3>üëë –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</h3>
                <div class="admin-grid">
                    <div class="admin-section">
                        <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h4>
                        <input type="text" id="banUserInput" placeholder="–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ Email">
                        <div class="admin-buttons">
                            <button class="btn btn-danger btn-small" onclick="banUser()">–ó–∞–±–∞–Ω–∏—Ç—å</button>
                            <button class="btn btn-warning btn-small" onclick="muteUser()">–í—ã–¥–∞—Ç—å –º—É—Ç</button>
                            <button class="btn btn-success btn-small" onclick="unbanUser()">–†–∞–∑–±–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h4>
                        <div class="stats">
                            <p>–í—Å–µ–≥–æ –ø–æ—Å—Ç–æ–≤: <span id="postsCount">0</span></p>
                            <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <span id="usersCount">0</span></p>
                            <p>–û–Ω–ª–∞–π–Ω: <span id="onlineCount">1</span>/30</p>
                            <p>–ñ–∞–ª–æ–±: <span id="reportsCount">0</span></p>
                        </div>
                    </div>
                    
                    <div class="admin-section">
                        <h4>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h4>
                        <div class="admin-buttons">
                            <button class="btn btn-primary btn-small" onclick="clearOldPosts()">–û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ—Å—Ç—ã</button>
                            <button class="btn btn-secondary btn-small" onclick="exportData()">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
            <div class="search-container">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º, —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é –∏–ª–∏ —Ç–µ–≥–∞–º...">
                    <button class="btn btn-primary" onclick="searchPosts()">–ü–æ–∏—Å–∫</button>
                    <button class="btn btn-secondary" onclick="clearSearch()">–°–±—Ä–æ—Å</button>
                </div>
                <div class="filters">
                    <div class="filter-group">
                        <input type="checkbox" id="filterNSFW" onchange="filterPosts()">
                        <label for="filterNSFW">–ü–æ–∫–∞–∑–∞—Ç—å NSFW</label>
                    </div>
                    <div class="filter-group">
                        <select id="sortBy" onchange="sortPosts()">
                            <option value="newest">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
                            <option value="oldest">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
                            <option value="active">–ü–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞ -->
            <div id="createPostSection" class="post hidden">
                <h3>üìù –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç</h3>
                <form id="postForm" onsubmit="return createPost(event)">
                    <div class="form-group">
                        <input type="text" id="postTitle" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Å—Ç–∞" required maxlength="100">
                    </div>
                    
                    <div class="form-group">
                        <textarea id="postContent" placeholder="–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞..." rows="6" required maxlength="2000"></textarea>
                    </div>

                    <div class="form-group">
                        <label>–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é):</label>
                        <input type="text" id="postTags" placeholder="–º–µ–º, –ø–æ–º–æ—â—å, –æ–±—Å—É–∂–¥–µ–Ω–∏–µ, nsfw..." maxlength="100">
                        <div style="font-size: 12px; color: var(--text-light); margin-top: 5px;">
                            –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–≥–∏: <span class="tag" onclick="addTag('–º–µ–º')">–º–µ–º</span>
                            <span class="tag" onclick="addTag('–ø–æ–º–æ—â—å')">–ø–æ–º–æ—â—å</span>
                            <span class="tag" onclick="addTag('–æ–±—Å—É–∂–¥–µ–Ω–∏–µ')">–æ–±—Å—É–∂–¥–µ–Ω–∏–µ</span>
                            <span class="tag" onclick="addTag('nsfw')">nsfw</span>
                            <span class="tag" onclick="addTag('–æ—Ñ—Ñ—Ç–æ–ø')">–æ—Ñ—Ñ—Ç–æ–ø</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="isNSFW"> üîû NSFW/NSFL –∫–æ–Ω—Ç–µ–Ω—Ç
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="isSpoiler"> üí¨ –°–ø–æ–π–ª–µ—Ä
                        </label>
                    </div>
                    
                    <div class="file-upload">
                        <label for="postImage" class="file-label">üìé –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–º–∞–∫—Å. 5MB)</label>
                        <input type="file" id="postImage" accept="image/*" onchange="previewImage(this)">
                        <div id="imagePreview" class="image-preview"></div>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç</button>
                        <button type="button" class="btn btn-secondary" onclick="cancelPost()">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </form>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞ -->
            <div class="text-center mb-20">
                <button class="btn btn-primary" onclick="showCreatePost()" id="createPostBtn">‚ûï –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</button>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤ -->
            <div id="postsContainer" class="posts-container">
                <!-- –ü–æ—Å—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–¥–µ—Å—å -->
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ NSFW -->
    <div id="nsfwModal" class="modal">
        <div class="modal-content">
            <h3>üîû –í–ù–ò–ú–ê–ù–ò–ï: NSFW/NSFL –ö–û–ù–¢–ï–ù–¢</h3>
            <div class="nsfw-warning">
                <p><strong>–≠—Ç–æ—Ç –ø–æ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —à–æ–∫–∏—Ä–æ–≤–∞—Ç—å!</strong></p>
                <p>–ï—Å–ª–∏ –≤–∞–º –º–µ–Ω—å—à–µ 18 –ª–µ—Ç, –≤—ã –±–µ—Ä–µ–º–µ–Ω–Ω—ã, –∏–º–µ–µ—Ç–µ –ø—Å–∏—Ö–∏—á–µ—Å–∫–∏–µ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è –∏–ª–∏ –ª–µ–≥–∫–æ –ø–æ–¥–¥–∞–µ—Ç–µ—Å—å —Å—Ç—Ä–µ—Å—Å—É - –ù–ï –°–ú–û–¢–†–ò–¢–ï –î–ê–õ–¨–®–ï.</p>
                <p>–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—è —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç, –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ —á—Ç–æ:</p>
                <ul>
                    <li>–í–∞–º –µ—Å—Ç—å 18 –ª–µ—Ç</li>
                    <li>–í—ã –ø—Å–∏—Ö–∏—á–µ—Å–∫–∏ –∑–¥–æ—Ä–æ–≤—ã</li>
                    <li>–û—Å–æ–∑–Ω–∞–µ—Ç–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è</li>
                    <li>–ù–µ –±—É–¥–µ—Ç–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ä–µ–¥–∏ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö</li>
                </ul>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-danger" onclick="closeNSFWModal()">‚ùå –í—ã–π—Ç–∏</button>
                <button class="btn btn-primary" onclick="confirmNSFW()">‚úÖ –Ø –ø–æ–Ω–∏–º–∞—é —Ä–∏—Å–∫, –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç</button>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const CONFIG = {
            MAX_USERS: 30,
            POST_AUTO_HIDE_DAYS: 10,
            ADMIN_EMAIL: 'kaktyz896@gmail.com',
            EMAIL_SERVICE: 'kodauyntihikatsii7@gmail.com'
        };

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentUser = null;
        let posts = [];
        let users = [];
        let verificationCodes = new Map();
        let currentSearch = '';
        let currentFilters = {};

        // –ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
        class UserManager {
            static createGuest() {
                const guestId = 'guest_' + Math.random().toString(36).substr(2, 9);
                return {
                    type: 'guest',
                    id: guestId,
                    username: '–ì–æ—Å—Ç—å_' + guestId.substr(6, 4),
                    created: new Date().toISOString(),
                    lastActivity: new Date().toISOString(),
                    permissions: {
                        canPost: false,
                        canComment: false,
                        canViewNSFW: false
                    }
                };
            }

            static createVerified(email) {
                const isAdmin = email === CONFIG.ADMIN_EMAIL;
                return {
                    type: 'verified',
                    email: email,
                    username: email.split('@')[0],
                    created: new Date().toISOString(),
                    lastActivity: new Date().toISOString(),
                    isAdmin: isAdmin,
                    permissions: {
                        canPost: true,
                        canComment: true,
                        canViewNSFW: true
                    }
                };
            }

            static isAdmin(user) {
                return user && user.isAdmin;
            }
        }

        // –ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–∞–º–∏
        class PostManager {
            static createPost(data, author) {
                const contentAnalysis = ModerationBot.analyzeContent(data.content + ' ' + data.title);
                const tags = data.tags ? data.tags.split(',').map(tag => tag.trim().toLowerCase()).filter(tag => tag) : [];
                
                return {
                    id: Date.now().toString(),
                    title: data.title,
                    content: data.content,
                    author: author.username,
                    authorEmail: author.email,
                    authorType: author.type,
                    timestamp: new Date().toISOString(),
                    isNSFW: data.isNSFW || contentAnalysis.isNSFW,
                    isSpoiler: data.isSpoiler,
                    tags: tags,
                    image: data.image,
                    comments: [],
                    hidden: false,
                    reports: [],
                    views: 0,
                    lastActivity: new Date().toISOString(),
                    autoHideDate: new Date(Date.now() + CONFIG.POST_AUTO_HIDE_DAYS * 24 * 60 * 60 * 1000).toISOString()
                };
            }

            static addComment(postId, content, author) {
                const post = posts.find(p => p.id === postId);
                if (!post) return false;

                post.comments.push({
                    id: Date.now().toString(),
                    content: content,
                    author: author.username,
                    authorType: author.type,
                    timestamp: new Date().toISOString(),
                    hidden: false
                });

                post.lastActivity = new Date().toISOString();
                return true;
            }

            static shouldHidePost(post) {
                if (post.hidden) return false;
                
                const lastActivity = new Date(post.lastActivity);
                const now = new Date();
                const daysDiff = (now - lastActivity) / (1000 * 60 * 60 * 24);
                
                return daysDiff >= CONFIG.POST_AUTO_HIDE_DAYS && post.comments.length === 0;
            }

            static searchPosts(query, filters = {}) {
                if (!query) return posts;
                
                const lowerQuery = query.toLowerCase();
                return posts.filter(post => {
                    const matchesSearch = 
                        post.title.toLowerCase().includes(lowerQuery) ||
                        post.content.toLowerCase().includes(lowerQuery) ||
                        post.tags.some(tag => tag.includes(lowerQuery)) ||
                        post.author.toLowerCase().includes(lowerQuery);
                    
                    const matchesFilters = 
                        (!filters.hideNSFW || !post.isNSFW) &&
                        (!filters.onlyVerified || post.authorType === 'verified');
                    
                    return matchesSearch && matchesFilters && !post.hidden;
                });
            }
        }

        // –ë–æ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏
        class ModerationBot {
            static bannedWords = [
                '–≥–µ—Ä–æ–∏–Ω', '–∫–æ–∫–∞–∏–Ω', '–º–µ—Ç–∞–º—Ñ–µ—Ç–∞–º–∏–Ω', '–õ–°–î', '–º–∞—Ä–∏—Ö—É–∞–Ω–∞', '–≥–∞—à–∏—à',
                '–∞–º—Ñ–µ—Ç–∞–º–∏–Ω', '—ç–∫—Å—Ç–∞–∑–∏', '–º–æ—Ä—Ñ–∏–Ω', '–∫–æ–¥–µ–∏–Ω', '—Ç—Ä–∞–º–∞–¥–æ–ª',
                '—Å–ø–∞–π—Å', '—Å–æ–ª—å', '–º–µ—Ñ–µ–¥—Ä–æ–Ω', '–∞–ª—å—Ñ–∞-PVP', '–Ω–∞—Ä–∫–æ—Ç–∏–∫', '–Ω–∞—Ä–∫–æ—Ç–∞'
            ];
            
            static nsfwPatterns = [
                '—Å—É–∏—Ü–∏–¥', '—Å–∞–º–æ—É–±–∏–π—Å—Ç–≤–æ', '—Ç—Ä—É–ø', '–º–µ—Ä—Ç–≤', '—Å–º–µ—Ä—Ç—å',
                '–∫—Ä–æ–≤—å', '—Ä–∞–Ω–∞', '–Ω–∞—Å–∏–ª–∏–µ', '—É–±–∏–π—Å—Ç–≤–æ', '—Ç—Ä–∞–≤–º–∞'
            ];
            
            static analyzeContent(text) {
                const lowerText = text.toLowerCase();
                
                return {
                    hasBannedWords: this.bannedWords.some(word => lowerText.includes(word)),
                    isNSFW: this.nsfwPatterns.some(pattern => lowerText.includes(pattern)),
                    riskLevel: this.calculateRiskLevel(lowerText)
                };
            }
            
            static calculateRiskLevel(text) {
                let score = 0;
                
                this.bannedWords.forEach(word => {
                    if (text.includes(word)) score += 2;
                });
                
                this.nsfwPatterns.forEach(pattern => {
                    if (text.includes(pattern)) score += 1;
                });
                
                if (score >= 3) return 'high';
                if (score >= 1) return 'medium';
                return 'low';
            }
        }

        // Email —Å–µ—Ä–≤–∏—Å (—ç–º—É–ª—è—Ü–∏—è)
        class EmailService {
            static async sendVerificationCode(email, code) {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ SMTP
                // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç–º—É–ª—è—Ü–∏—é
                
                return new Promise((resolve) => {
                    setTimeout(() => {
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
                        verificationCodes.set(email, {
                            code: code,
                            expires: Date.now() + 10 * 60 * 1000 // 10 –º–∏–Ω—É—Ç
                        });
                        
                        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ email)
                        showNotification(`–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: ${code} (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ ${email})`, 'success');
                        resolve(true);
                    }, 2000);
                });
            }

            static async sendPostHiddenNotification(email, postTitle) {
                console.log(`–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é ${email} –æ —Å–∫—Ä—ã—Ç–∏–∏ –ø–æ—Å—Ç–∞ "${postTitle}"`);
                showNotification(`–ü–æ—Å—Ç "${postTitle}" —Å–∫—Ä—ã—Ç –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏`, 'warning');
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            checkOldPosts();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Å—Ç–µ–≤—É—é —Å–µ—Å—Å–∏—é
            const guestSession = getCookie('guestSession');
            if (guestSession) {
                enterAsGuest(guestSession);
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–Ω–ª–∞–π–Ω —Å—á–µ—Ç—á–∏–∫
            updateOnlineCount();
            setInterval(updateOnlineCount, 30000);
            setInterval(checkOldPosts, 300000);
        });

        // –§—É–Ω–∫—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function showWelcome() {
            switchScreen('welcomeScreen');
        }

        function showRules() {
            if (!document.getElementById('ageConfirm').checked) {
                showNotification('–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —á—Ç–æ –≤–∞–º –µ—Å—Ç—å 18 –ª–µ—Ç', 'error');
                return;
            }
            switchScreen('rulesScreen');
        }

        function showLogin() {
            if (!document.getElementById('ageConfirm').checked) {
                showNotification('–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —á—Ç–æ –≤–∞–º –µ—Å—Ç—å 18 –ª–µ—Ç', 'error');
                return;
            }
            switchScreen('loginScreen');
        }

        function goToMain() {
            if (!currentUser) {
                enterAsGuest();
                return;
            }
            switchScreen('mainScreen');
            loadPosts();
            updateUserInfo();
        }

        async function sendVerificationCode() {
            const email = document.getElementById('loginEmail').value;
            
            if (!validateEmail(email)) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π email –∞–¥—Ä–µ—Å', 'error');
                return;
            }

            const code = Math.floor(100000 + Math.random() * 900000).toString();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
            const btn = document.getElementById('sendCodeBtn');
            btn.disabled = true;
            btn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
            
            await EmailService.sendVerificationCode(email, code);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–∞–∑–¥–µ–ª —Å –∫–æ–¥–æ–º
            document.getElementById('codeSection').classList.remove('hidden');
            document.getElementById('verifyCodeBtn').classList.remove('hidden');
            document.getElementById('sendCodeBtn').classList.add('hidden');
            
            btn.disabled = false;
        }

        function verifyCode() {
            const email = document.getElementById('loginEmail').value;
            const code = document.getElementById('verificationCode').value;
            const codeData = verificationCodes.get(email);
            
            if (!codeData || Date.now() > codeData.expires) {
                showNotification('–ö–æ–¥ —É—Å—Ç–∞—Ä–µ–ª –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ –Ω–æ–≤—ã–π –∫–æ–¥.', 'error');
                return;
            }
            
            if (code !== codeData.code) {
                showNotification('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è', 'error');
                return;
            }
            
            // –£—Å–ø–µ—à–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
            currentUser = UserManager.createVerified(email);
            users.push(currentUser);
            verificationCodes.delete(email);
            
            setCookie('userSession', JSON.stringify(currentUser), 30);
            saveData();
            
            showNotification('Email —É—Å–ø–µ—à–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω!', 'success');
            goToMain();
        }

        function enterAsGuest(guestId = null) {
            if (guestId) {
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –≥–æ—Å—Ç–µ–≤—É—é —Å–µ—Å—Å–∏—é
                currentUser = users.find(u => u.id === guestId) || UserManager.createGuest();
            } else {
                currentUser = UserManager.createGuest();
                users.push(currentUser);
            }
            
            setCookie('guestSession', currentUser.id, 7);
            saveData();
            goToMain();
        }

        function showCreatePost() {
            if (!currentUser || !currentUser.permissions.canPost) {
                showNotification('–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–æ–≤', 'error');
                return;
            }
            document.getElementById('createPostSection').classList.remove('hidden');
            document.getElementById('createPostBtn').classList.add('hidden');
        }

        function cancelPost() {
            document.getElementById('createPostSection').classList.add('hidden');
            document.getElementById('createPostBtn').classList.remove('hidden');
            document.getElementById('postForm').reset();
            document.getElementById('imagePreview').innerHTML = '';
        }

        function createPost(event) {
            event.preventDefault();
            
            if (!currentUser || !currentUser.permissions.canPost) {
                showNotification('–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–æ–≤', 'error');
                return;
            }
            
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const tags = document.getElementById('postTags').value;
            const isNSFW = document.getElementById('isNSFW').checked;
            const isSpoiler = document.getElementById('isSpoiler').checked;
            
            if (!title.trim() || !content.trim()) {
                showNotification('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞', 'error');
                return;
            }
            
            const postData = {
                title: title,
                content: content,
                tags: tags,
                isNSFW: isNSFW,
                isSpoiler: isSpoiler,
                image: null
            };
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            const imageInput = document.getElementById('postImage');
            if (imageInput.files[0]) {
                if (imageInput.files[0].size > 5 * 1024 * 1024) {
                    showNotification('–†–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 5MB', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    postData.image = e.target.result;
                    finishPostCreation(postData);
                };
                reader.readAsDataURL(imageInput.files[0]);
            } else {
                finishPostCreation(postData);
            }
            
            return false;
        }

        function finishPostCreation(postData) {
            const newPost = PostManager.createPost(postData, currentUser);
            posts.unshift(newPost);
            
            saveData();
            loadPosts();
            cancelPost();
            
            showNotification('–ü–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω!', 'success');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
            const analysis = ModerationBot.analyzeContent(postData.content + ' ' + postData.title);
            if (analysis.riskLevel === 'high') {
                showNotification('–ü–æ—Å—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—É', 'warning');
            }
        }

        function addTag(tagName) {
            const tagsInput = document.getElementById('postTags');
            const currentTags = tagsInput.value.split(',').map(t => t.trim()).filter(t => t);
            
            if (!currentTags.includes(tagName)) {
                currentTags.push(tagName);
                tagsInput.value = currentTags.join(', ');
            }
        }

        function previewImage(input) {
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = '';
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    preview.appendChild(img);
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function loadPosts() {
            const container = document.getElementById('postsContainer');
            const filteredPosts = currentSearch ? 
                PostManager.searchPosts(currentSearch, currentFilters) : 
                posts.filter(post => !post.hidden);
            
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
            filteredPosts.sort((a, b) => {
                const sortBy = document.getElementById('sortBy').value;
                switch(sortBy) {
                    case 'oldest':
                        return new Date(a.timestamp) - new Date(b.timestamp);
                    case 'active':
                        return new Date(b.lastActivity) - new Date(a.lastActivity);
                    default: // newest
                        return new Date(b.timestamp) - new Date(a.timestamp);
                }
            });
            
            if (filteredPosts.length === 0) {
                container.innerHTML = `
                    <div class="post text-center">
                        <h3>üò¥ –ü–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤</h3>
                        <p>${currentSearch ? '–ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ' : '–ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –ø–æ—Å—Ç –Ω–∞ —ç—Ç–æ–π –¥–æ—Å–∫–µ!'}</p>
                        ${!currentUser.permissions.canPost ? '<p><small>–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–æ–≤</small></p>' : ''}
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            filteredPosts.forEach(post => {
                const postElement = createPostElement(post);
                container.appendChild(postElement);
            });
            
            updateAdminStats();
        }

        function createPostElement(post) {
            const postDiv = document.createElement('div');
            postDiv.className = 'post';
            postDiv.id = `post-${post.id}`;
            
            const isAuthor = post.author === currentUser.username;
            const canModerate = UserManager.isAdmin(currentUser);
            const canViewNSFW = currentUser.permissions.canViewNSFW;
            
            let contentHTML = `
                <div class="post-header">
                    <div>
                        <span class="post-author">${escapeHtml(post.author)}</span>
                        ${post.authorType === 'verified' ? '‚úÖ' : 'üë§'}
                        ${post.isNSFW ? 'üîû' : ''}
                        ${post.isSpoiler ? 'üí¨' : ''}
                    </div>
                    <div class="post-date">${formatDate(post.timestamp)}</div>
                </div>
                
                <h3>${escapeHtml(post.title)}</h3>
            `;
            
            // –¢–µ–≥–∏
            if (post.tags && post.tags.length > 0) {
                contentHTML += `<div class="post-tags">`;
                post.tags.forEach(tag => {
                    contentHTML += `<span class="tag" onclick="searchByTag('${tag}')">${escapeHtml(tag)}</span>`;
                });
                contentHTML += `</div>`;
            }
            
            // –ö–æ–Ω—Ç–µ–Ω—Ç —Å NSFW –∑–∞—â–∏—Ç–æ–π
            if (post.isNSFW && !canViewNSFW) {
                contentHTML += `
                    <div class="nsfw-warning">
                        <strong>üîû –í–ù–ò–ú–ê–ù–ò–ï: NSFW/NSFL –ö–û–ù–¢–ï–ù–¢</strong>
                        <p>–≠—Ç–æ—Ç –ø–æ—Å—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç —à–æ–∫–∏—Ä–æ–≤–∞—Ç—å.</p>
                        <button class="btn btn-warning btn-small" onclick="showNSFWModal('${post.id}')">–ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç</button>
                    </div>
                    <div id="nsfw-content-${post.id}" class="nsfw-content">
                        ${formatPostContent(post)}
                    </div>
                `;
            } else {
                contentHTML += `<div class="post-content">${formatPostContent(post)}</div>`;
            }
            
            // –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
            if (post.comments.length > 0) {
                contentHTML += `<div class="comments-section">`;
                post.comments.filter(comment => !comment.hidden).forEach(comment => {
                    contentHTML += `
                        <div class="comment">
                            <div class="comment-header">
                                <span class="comment-author">${escapeHtml(comment.author)}</span>
                                <span class="post-date">${formatDate(comment.timestamp)}</span>
                            </div>
                            <div class="post-content">${escapeHtml(comment.content)}</div>
                        </div>
                    `;
                });
                contentHTML += `</div>`;
            }
            
            // –§–æ—Ä–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
            if (currentUser.permissions.canComment) {
                contentHTML += `
                    <div class="comment-form">
                        <textarea id="comment-${post.id}" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." rows="2" maxlength="500"></textarea>
                        <button class="btn btn-primary btn-small" onclick="addComment('${post.id}')">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
                    </div>
                `;
            }
            
            // –î–µ–π—Å—Ç–≤–∏—è
            contentHTML += `<div class="post-actions" style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">`;
            
            if (canModerate) {
                contentHTML += `
                    <button class="btn btn-danger btn-small" onclick="hidePost('${post.id}')">–°–∫—Ä—ã—Ç—å</button>
                    <button class="btn btn-warning btn-small" onclick="reportPost('${post.id}')">–ü–æ–∂–∞–ª–æ–≤–∞—Ç—å—Å—è</button>
                `;
            }
            
            if (isAuthor) {
                contentHTML += `<button class="btn btn-secondary btn-small" onclick="deletePost('${post.id}')">–£–¥–∞–ª–∏—Ç—å</button>`;
            }
            
            contentHTML += `</div>`;
            
            postDiv.innerHTML = contentHTML;
            return postDiv;
        }

        function formatPostContent(post) {
            let content = escapeHtml(post.content).replace(/\n/g, '<br>');
            
            if (post.image) {
                content += `<div class="image-preview mt-20"><img src="${post.image}" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–∞"></div>`;
            }
            
            return content;
        }

        function addComment(postId) {
            if (!currentUser || !currentUser.permissions.canComment) {
                showNotification('–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'error');
                return;
            }
            
            const commentText = document.getElementById(`comment-${postId}`).value;
            if (!commentText.trim()) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è', 'error');
                return;
            }
            
            if (PostManager.addComment(postId, commentText, currentUser)) {
                saveData();
                loadPosts();
                document.getElementById(`comment-${postId}`).value = '';
                showNotification('–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω', 'success');
            }
        }

        // –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã
        function searchPosts() {
            currentSearch = document.getElementById('searchInput').value;
            loadPosts();
        }

        function searchByTag(tag) {
            document.getElementById('searchInput').value = tag;
            currentSearch = tag;
            loadPosts();
        }

        function clearSearch() {
            document.getElementById('searchInput').value = '';
            currentSearch = '';
            loadPosts();
        }

        function filterPosts() {
            currentFilters.hideNSFW = !document.getElementById('filterNSFW').checked;
            loadPosts();
        }

        function sortPosts() {
            loadPosts();
        }

        // NSFW —Å–∏—Å—Ç–µ–º–∞
        function showNSFWModal(postId) {
            document.getElementById('nsfwModal').style.display = 'flex';
            document.getElementById('nsfwModal').dataset.postId = postId;
        }

        function closeNSFWModal() {
            document.getElementById('nsfwModal').style.display = 'none';
        }

        function confirmNSFW() {
            if (!currentUser) return;
            
            currentUser.permissions.canViewNSFW = true;
            const postId = document.getElementById('nsfwModal').dataset.postId;
            
            document.getElementById(`nsfw-content-${postId}`).style.display = 'block';
            document.querySelector(`#post-${postId} .nsfw-warning`).style.display = 'none';
            
            closeNSFWModal();
            saveData();
        }

        // –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function updateUserInfo() {
            const userStatus = document.getElementById('userStatus');
            const adminPanel = document.getElementById('adminPanel');
            const createPostBtn = document.getElementById('createPostBtn');
            
            if (currentUser) {
                userStatus.textContent = `${currentUser.username} (${currentUser.type === 'guest' ? '–ì–æ—Å—Ç—å' : '–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω'})`;
                
                if (UserManager.isAdmin(currentUser)) {
                    adminPanel.style.display = 'block';
                }
                
                if (currentUser.permissions.canPost) {
                    createPostBtn.classList.remove('hidden');
                } else {
                    createPostBtn.classList.add('hidden');
                }
            }
        }

        function updateAdminStats() {
            document.getElementById('postsCount').textContent = posts.length;
            document.getElementById('usersCount').textContent = users.length;
            document.getElementById('reportsCount').textContent = posts.reduce((acc, post) => acc + post.reports.length, 0);
        }

        function updateOnlineCount() {
            // –≠–º—É–ª—è—Ü–∏—è –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            const online = Math.min(CONFIG.MAX_USERS, Math.floor(Math.random() * 10) + users.length + 1);
            document.getElementById('onlineCount').textContent = online;
        }

        function banUser() {
            if (!UserManager.isAdmin(currentUser)) return;
            
            const userInput = document.getElementById('banUserInput').value;
            if (!userInput) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ email', 'error');
                return;
            }
            
            const userToBan = users.find(u => u.username === userInput || u.email === userInput);
            if (userToBan) {
                userToBan.banned = true;
                userToBan.banReason = '–ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª';
                userToBan.bannedBy = currentUser.username;
                userToBan.bannedAt = new Date().toISOString();
                
                saveData();
                showNotification(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${userInput} –∑–∞–±–∞–Ω–µ–Ω`, 'success');
            } else {
                showNotification('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
            }
            
            document.getElementById('banUserInput').value = '';
        }

        function muteUser() {
            if (!UserManager.isAdmin(currentUser)) return;
            
            const userInput = document.getElementById('banUserInput').value;
            if (!userInput) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ email', 'error');
                return;
            }
            
            showNotification(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${userInput} –ø–æ–ª—É—á–∏–ª –º—É—Ç –Ω–∞ 24 —á–∞—Å–∞`, 'warning');
            document.getElementById('banUserInput').value = '';
        }

        function unbanUser() {
            if (!UserManager.isAdmin(currentUser)) return;
            
            const userInput = document.getElementById('banUserInput').value;
            if (!userInput) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ email', 'error');
                return;
            }
            
            const userToUnban = users.find(u => u.username === userInput || u.email === userInput);
            if (userToUnban && userToUnban.banned) {
                userToUnban.banned = false;
                saveData();
                showNotification(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${userInput} —Ä–∞–∑–±–∞–Ω–µ–Ω`, 'success');
            } else {
                showNotification('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ –∑–∞–±–∞–Ω–µ–Ω', 'error');
            }
            
            document.getElementById('banUserInput').value = '';
        }

        function reportPost(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            post.reports.push({
                by: currentUser.username,
                reason: '–ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª',
                timestamp: new Date().toISOString()
            });
            
            saveData();
            showNotification('–ñ–∞–ª–æ–±–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞–º', 'success');
        }

        function hidePost(postId) {
            if (!UserManager.isAdmin(currentUser)) return;
            
            const post = posts.find(p => p.id === postId);
            if (post) {
                post.hidden = true;
                saveData();
                loadPosts();
                showNotification('–ü–æ—Å—Ç —Å–∫—Ä—ã—Ç', 'success');
            }
        }

        function deletePost(postId) {
            const post = posts.find(p => p.id === postId);
            if (post && (post.author === currentUser.username || UserManager.isAdmin(currentUser))) {
                if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø–æ—Å—Ç?')) {
                    posts = posts.filter(p => p.id !== postId);
                    saveData();
                    loadPosts();
                    showNotification('–ü–æ—Å—Ç —É–¥–∞–ª–µ–Ω', 'success');
                }
            }
        }

        function clearOldPosts() {
            if (!UserManager.isAdmin(currentUser)) return;
            
            const oldPostsCount = posts.filter(post => PostManager.shouldHidePost(post)).length;
            posts = posts.filter(post => !PostManager.shouldHidePost(post));
            saveData();
            loadPosts();
            showNotification(`–£–¥–∞–ª–µ–Ω–æ ${oldPostsCount} —Å—Ç–∞—Ä—ã—Ö –ø–æ—Å—Ç–æ–≤`, 'success');
        }

        function exportData() {
            if (!UserManager.isAdmin(currentUser)) return;
            
            const data = {
                posts: posts,
                users: users,
                exportedAt: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `oldschool-board-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function checkOldPosts() {
            let hiddenCount = 0;
            
            posts.forEach(post => {
                if (PostManager.shouldHidePost(post)) {
                    post.hidden = true;
                    hiddenCount++;
                    
                    // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä—É (–µ—Å–ª–∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω)
                    const author = users.find(u => u.username === post.author);
                    if (author && author.type === 'verified') {
                        EmailService.sendPostHiddenNotification(author.email, post.title);
                    }
                }
            });
            
            if (hiddenCount > 0) {
                saveData();
                console.log(`–°–∫—Ä—ã—Ç–æ ${hiddenCount} –ø–æ—Å—Ç–æ–≤ –∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏`);
            }
        }

        function logout() {
            currentUser = null;
            document.cookie = 'guestSession=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            document.cookie = 'userSession=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
            showWelcome();
        }

        // –£—Ç–∏–ª–∏—Ç—ã
        function switchScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60 * 1000) return '—Ç–æ–ª—å–∫–æ —á—Ç–æ';
            if (diff < 60 * 60 * 1000) return `${Math.floor(diff / (60 * 1000))} –º–∏–Ω. –Ω–∞–∑–∞–¥`;
            if (diff < 24 * 60 * 60 * 1000) return `${Math.floor(diff / (60 * 60 * 1000))} —á. –Ω–∞–∑–∞–¥`;
            
            return date.toLocaleString('ru-RU', {
                day: 'numeric',
                month: 'numeric',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function setCookie(name, value, days) {
            const expires = new Date(Date.now() + days * 24 * 60 * 60 * 1000).toUTCString();
            document.cookie = `${name}=${value}; expires=${expires}; path=/; samesite=lax`;
        }

        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }

        function showNotification(message, type = 'info') {
            // –£–¥–∞–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            document.querySelectorAll('.notification').forEach(notif => notif.remove());
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        function saveData() {
            try {
                localStorage.setItem('oldschool_posts', JSON.stringify(posts));
                localStorage.setItem('oldschool_users', JSON.stringify(users));
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:', e);
                showNotification('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö', 'error');
            }
        }

        function loadData() {
            try {
                const savedPosts = localStorage.getItem('oldschool_posts');
                const savedUsers = localStorage.getItem('oldschool_users');
                const savedUserSession = getCookie('userSession');
                
                posts = savedPosts ? JSON.parse(savedPosts) : [];
                users = savedUsers ? JSON.parse(savedUsers) : [];
                
                // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Å—Å–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (savedUserSession) {
                    try {
                        currentUser = JSON.parse(savedUserSession);
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏:', e);
                    }
                }
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º –∞–¥–º–∏–Ω–∞ –µ—Å–ª–∏ –Ω–µ—Ç
                if (!users.find(u => u.email === CONFIG.ADMIN_EMAIL)) {
                    users.push(UserManager.createVerified(CONFIG.ADMIN_EMAIL));
                }
            } catch (e) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', e);
                posts = [];
                users = [];
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –∞–¥–º–∏–Ω–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function enableAdminMode() {
            currentUser = UserManager.createVerified(CONFIG.ADMIN_EMAIL);
            setCookie('userSession', JSON.stringify(currentUser), 30);
            saveData();
            goToMain();
            showNotification('–†–µ–∂–∏–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω', 'success');
        }

        // –î–æ–±–∞–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        window.enableAdminMode = enableAdminMode;
        window.debugData = () => {
            console.log('Posts:', posts);
            console.log('Users:', users);
            console.log('Current User:', currentUser);
        };
    </script>
</body>
</html>
